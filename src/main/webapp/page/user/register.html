<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>用户注册</title>
    <script src="../../layui/layui.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-1.11.1.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../layui/lay-verify.js"></script>
    <script type="text/javascript" src="../../js/base.js"></script>
    <link rel="stylesheet" type="text/css" href="../../layui/css/layui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/public.css" />
  </head>

  <body>
	<form class="layui-form">
	  <div class="layui-form-item">
	    <label class="layui-form-label">手机号</label>
	    <div class="layui-input-block">
	      <input type="text" name="pPhone" value="15528022968" required  lay-verify="required|phone" placeholder="请输入手机号" class="layui-input">
	    </div>
	  </div>
	  <div class="layui-form-item">
	    <label class="layui-form-label">姓名</label>
	    <div class="layui-input-block">
	      <input name="pName" value="刘嘉望"required lay-verify="required|username" placeholder="请输入姓名" autocomplete="off" class="layui-input">
	    </div>
	  </div>
	  <div class="layui-form-item">
	  	<label class="layui-form-label">密码</label>
	  	<div class="layui-input-block">
	      <input type="password" name="pPass" value="111111" id="newPwd" required  lay-verify="required" placeholder="请输入密码" class="layui-input">
	    </div>
	  </div>
	  <div class="layui-form-item">
	  	<label class="layui-form-label">确认密码</label>
	  	<div class="layui-input-block">
	      <input type="password"  id="newPwdConfirm" value="111111"required  lay-verify="required|confirmPwd" placeholder="请输入密码" class="layui-input">
	    </div>
	  </div>
	  <div class="layui-form-item">
	  	<label class="layui-form-label">邮箱</label>
	  	<div class="layui-input-block">
	      <input type="text" id="email"  name="pEmail" value="2319277867@qq.com" required  lay-verify="required|email" placeholder="请输入邮箱" class="layui-input">
	    </div>
	  </div>
	  <div class="layui-form-item">
	    <label class="layui-form-label">选择部门</label>
	    <div class="layui-input-block">
	      <select name="pDept" lay-verify="required">
	        <option value=""></option>
	        <option value="技术部">技术部</option>
	      </select>
	    </div>
	  </div>
	  <div class="layui-form-item">
	    <label class="layui-form-label">性别</label>
	    <div class="layui-input-block">
	      <input type="radio" name="pGender" value="男" title="男" checked>
	      <input type="radio" name="pGender" value="女" title="女">
	    </div>
	  </div>
	  <div class="layui-form-item">
	    <div class="layui-input-block">
	      <button class="layui-btn" lay-submit lay-filter="register">注册</button>
	      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
	    </div>
	  </div>
	</form>
	<script>
	//Demo
	layui.use(['form','jquery','layer'], function(){
	  var form = layui.form;
	  var $=layui.jquery;
	  var layer=parent.layer == undefined ? layui.layer:top.layer;
	  
	  //监听提交
	  form.on('submit(register)', function(data){
	    layer.msg(JSON.stringify(data.field),{time:1000});
	    $.ajax({
	    	url:basePath+"/user/register.do",
	    	type:"post",
	    	contentType:"application/json;charset=UTF-8",
	    	data:JSON.stringify(data.field),
	    	dataType:"json",
	    	traditional:true,
	    	beforeSend:function(){
	    		$("#register").attr({disabled:"disabled"});
	    	},
	    	success:function(data){
	    		if(data.status==1){
	    			layer.msg(data.msg,{icon:5,time:1000});
	    		}else if(data.status==0){
	    			layer.msg(data.msg,{icon:6,time:1000});
	    			window.location.href="../../page/login/login.html";
	    		}
	    	},
	    	complete:function(){
	    		$("#register").removeAttr("disabled");
	    	},
	    	error:function(){
	    		layer.msg("ajax返回失败",{icon:5});
	    	},
	    });
	    return false;
	  });
	});
	</script>
</body>
</html>